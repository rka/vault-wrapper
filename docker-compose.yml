version: "3"
services:
  vault-webapp:
    build:
      context: .
    container_name: vault-webapp
    restart: unless-stopped
    environment:
      - VAULT_ADDR=http://vault:8200
    networks:
      - saltbox
    labels:
      traefik.enable: true
      traefik.http.routers.vault-webapp.entrypoints: websecure
      traefik.http.routers.vault-webapp.rule: Host(`webapp.rkaa.tech`)
      traefik.http.routers.vault-webapp.tls.certresolver: httpresolver
      traefik.http.services.vault-webapp.loadbalancer.server.port: 5000
    depends_on:
      - vault

networks:
  saltbox:
    external: true